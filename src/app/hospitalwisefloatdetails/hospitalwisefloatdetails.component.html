<div class="form-cointainer">
    <div class="main-tab">
        <div class="row justify-content-between">
            <div class="col-lg-4">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a routerLink="/hospitalwisefloatnumberDetails" routerLinkActive="active" class="nav-link" style="color: #1f723f;">
                            Hospital Wise Abstract Report</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4 col-xxl-4">
            Float Number : <strong>{{float}}</strong>
        </div>
        <div class="col-lg-4 col-xxl-4">
            Generated By : <strong>{{createdByName}}</strong>
        </div>
        <div class="col-lg-4 col-xxl-4">
            SNA Doctor : <strong>{{snoName}}</strong>
        </div>
    </div>
    <div class="row" style="margin-top: 10px;margin-bottom: 10px;">
        <div class="col-lg-4 col-xxl-4" style="padding-top: 10px; padding-left: 17px;">
            <b>Total Hospital Count: <span style="color: green;">{{hospitalwisefloatdetails?.length}}</span></b>
        </div>
        <div class="col-lg-4 col-xxl-4" style="text-align: right; padding-top: 3px;">
            <button class="btn btn-outline-success btn-sm me-1" tooltip="Excel" (click)="downloadReport('excel')">
                <i class="bi bi-file-earmark-spreadsheet" style="font-size: 11pt;"></i>
            </button> &nbsp;
            <button class="btn btn-outline-danger btn-sm me-1" tooltip="pdf" (click)="downloadReportforpdf('pdf')">
                <i class="bi bi-file-earmark-pdf" style="font-size: 11pt;"></i>
            </button>
        </div>
        <div class="col-lg-4 col-xxl-4">
            <div class="input-group">
                <input type="text " id="txtsearchDate" name="txtsearchDate " [(ngModel)]="txtsearchDate" maxlength="20 " class="form-control " placeholder="Search here...... " autocomplete="off">
            </div>
        </div>
    </div>
    <div class="content-box p-0 overflow-hidden">
        <div class="table-responsive">
            <table class="table table-striped mb-0 ">
                <thead>
                    <tr>
                        <th>Sl No</th>
                        <th>State Name</th>
                        <th>District Name</th>
                        <th>Hospital Code</th>
                        <th>Hospital Name</th>
                        <th style="text-align: center;">Claims Submitted</th>
                        <th>Claim Amount (&#8377;)</th>
                        <th style="text-align: center;">Approved Claims</th>
                        <th>SNA Approved Amount (&#8377;)</th>
                        <th>Round Approved Amount (&#8377;)</th>
                        <th>Rest Claims</th>
                        <th>Bank Name </th>
                        <th>Account Number </th>
                        <th>IFSC Code </th>
                        <th style="text-align: center;">Details</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of hospitalwisefloatdetails | filter:txtsearchDate
                            |paginate: {id: 'listing_pagination', itemsPerPage: pageElement, currentPage: currentPage};index as i">
                        <td *ngIf="currentPage==1">{{i+1}}</td>
                        <td *ngIf="currentPage!=1">{{(currentPage-1)*pageElement+i+1}}</td>
                        <td>{{item.stateName}}</td>
                        <td>{{item.districtName}}</td>
                        <td>{{item.hospitalCode}}</td>
                        <td>{{item.hospitalName}}</td>
                        <td style="text-align: center;">{{item.claimraised}}</td>
                        <td>{{item.claimamount | indianCurrency}}</td>
                        <td style="text-align: center;">{{item.approved}}</td>
                        <td>{{item.snoamount | indianCurrency}}</td>
                        <td>{{item.roundSnoAmount | indianCurrency}}</td>
                        <td style="text-align: center;">
                          <a href="javascript:void(0);" data-bs-toggle="modal" data-bs-target="#pendingclaim"
                          (click)="pendingclaimdetails(item.hospitalCode,item.hospitalName,item.pendingcase)">{{item.pendingcase}}</a></td>
                        <td>{{item.bankname}}</td>
                        <td>{{item.accountnumber}}</td>
                        <td>{{item.ifsccode}}</td>
                        <td style="text-align: center;">
                            <a class="btn btn-outline-success btn-sm" (click)="view(item)">Detail</a>
                        </td>
                    </tr>
                    <tr *ngIf="hospitalwisefloatdetails?.length">
                        <td>Total </td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td style="text-align: center;font-weight: bold; color: rgb(12, 12, 12);">{{totalClaimRaised}}</td>
                        <td style="font-weight: bold; color: rgb(12, 12, 12);">{{totalClaimAmount | indianCurrency}}</td>
                        <td style="text-align: center;font-weight: bold; color: rgb(12, 12, 12);">{{totalApproved}}</td>
                        <td style="font-weight: bold; color: rgb(12, 12, 12);">{{totalSnoAmount | indianCurrency}}</td>
                        <td style="font-weight: bold; color: rgb(12, 12, 12);">{{roundTotalSnoAmount | indianCurrency}}</td>
                        <td style="text-align: center;">{{totalpendingcase}}</td>
                        <td style="text-align: center;"> </td>
                        <td style="text-align: center;"> </td>
                        <td style="text-align: center;"> </td>
                        <td style="text-align: center;"> </td>
                    </tr>
                    <tr *ngIf="!hospitalwisefloatdetails?.length">
                        <td colspan="10" align="center"><strong class="text-danger">No data found</strong></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <!-- <div class="row" style="margin-top: 20px" *ngIf="showPegi">
        <div class="col-sm-4">
            <div class="col-sm-*">
                show
                <select id="pageItem" name="pageItem" class="custom-select-sm" (change)="pageItemChange()">
                    <option value="100">100</option>
                    <option value="200">200</option>
                    <option value="300">300</option>
                    <option value="400">400</option>
                    <option value={{record}}>All</option>
                </select> entries
            </div>
        </div>
        <div class="col-sm-8 text-right">
            <pagination-controls id="listing_pagination" [maxSize]="100" [directionLinks]="true" (pageChange)="currentPage = $event" class="text-end" (pageBoundsCorrection)="onPageBoundsCorrection($event)"></pagination-controls>
        </div>
    </div> -->
</div>
<br>
<div class="row justify-content-between">
    <div class="row">
        <div class="col-lg-4">
            <h5 style="color: #1f723f;">Float History:</h5>
            <hr style="display: inline-block; width: 320%; margin-top: 1px; border-top: 2px solid #1f723f;">
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <!-- <h6 style="color: black;">Total Record:<span style="color:black">{{floatHistoryList?.length}}</span></h6> -->
            <b>Total Record: <span style="color: green;">{{floatHistoryList?.length}}</span></b>

        </div>
    </div>
    <div class="content-box p-0 overflow-hidden">
        <div class="table-responsive">
            <table class="table table-striped mb-0 ">
                <thead>
                    <tr>
                        <th>Sl No</th>
                        <th>Float Number</th>
                        <th>Action By</th>
                        <th>Action On</th>
                        <th>Amount</th>
                        <th>Remarks</th>
                        <th>Document</th>
                    </tr>
                </thead>
                <tbody>
                    <ng-container *ngFor="let float of floatHistoryList |paginate: {id: 'listing_pagination1', itemsPerPage: pageElement1, currentPage: currentPage1}; index as i">
                        <tr>
                            <td>{{ i + 1 }}</td>
                            <td> {{ float.floateno }}</td>
                            <td *ngIf="float.actionby != undefined">{{ float.actionby != null?float.actionby.fullname:''}} ({{float.actionby != undefined?float.actionby.groupId.groupTypeName:''}})</td>
                            <td *ngIf="float.actionby == undefined">N/A</td>
                            <td>{{ float.actionon| date :'dd-MMM-yyyy hh:mm:ss a' }}</td>
                            <td>{{ (float.amount != null ? float.amount : 0) | indianCurrency }}</td>
                            <td>{{ float.remarks!=null?float.remarks:"N/A"}}</td>
                            <td *ngIf="float.floatDoc != undefined">
                                <a href="javascript:void(0);" (click)="floatDocDownload($event,float)">
                                    <i class="bi bi-file-earmark-image" style="color:red;font-size:24px"></i></a>
                            </td>
                            <td *ngIf="float.floatDoc == undefined">--</td>
                        </tr>
                    </ng-container>
                    <tr *ngIf="floatHistoryList.length == 0">
                        <td colspan="10" class="text-center text-uppercase">
                            <strong class="text-danger">No data found !!</strong>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- <div class="row" style="margin-top: 20px" *ngIf="showPegi1">
            <div class="col-sm-4">
                <div class="col-sm-*">
                    show
                    <select id="pageItem1" name="pageItem1" class="custom-select-sm" (change)="pageItemChangehistory()">
                    <option value="100">100</option>
                    <option value="200">200</option>
                    <option value="300">300</option>
                    <option value="400">400</option>
                    <option value={{record1}}>All</option>
                </select> entries
                </div>
            </div>
            <div class="col-sm-8 text-right">
                <pagination-controls id="listing_pagination1" [maxSize]="100" [directionLinks]="true" (pageChange)="currentPage = $event" class="text-end" (pageBoundsCorrection)="onPageBoundsCorrectionhistory($event)"></pagination-controls>
            </div>
        </div> -->
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="pendingclaim" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="max-width: 70%;">
      <div class="modal-content">
          <div class="modal-header">
              <div class="col-9">
                <h5 class="modal-title" id="exampleModalLabel">
                  Hospital Name :- {{hospname}}
                </h5>
              </div>
              <div class="col-2" style="text-align:end ;">
                <button class="btn btn-success btn-sm mx-1" style="margin-top: 10px" tooltip="Excel"
                  (click)="downloadList2(1)">
                  <i class="bi bi-file-earmark-spreadsheet"></i>
                </button>
                <button class="btn btn-danger btn-sm mx-1" style="margin-top: 10px" tooltip="pdf" (click)="downloadList2(2)">
                  <i class="bi bi-file-earmark-pdf"></i>
                </button>
              </div>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="table-responsive example-container" >
              <table class="table table-striped">
                <caption></caption>
                  <thead>
                      <tr>
                        <th>SL#</th>
                        <th>URN</th>
                        <th>Claim No</th>
                        <th>Patient Name</th>
                        <th>Actual Date Of Admission</th>
                        <th>Actual Date Of Discharge</th>
                        <th>Package Name</th>
                        <th>Package Code</th>
                        <th>Current Status</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr *ngFor="let item of pendingclaimlist, index as j">
                          <td>{{j+1}}</td>
                          <td>{{item.urn}}</td>
                          <td>{{item.claimNo}}</td>
                          <td>{{item.patientName}}</td>
                          <td>{{item.packageCode}}</td>
                          <td>{{item.packageName}}</td>
                          <td>{{item.actdateofadm}}</td>
                          <td>{{item.actdateofdis}}</td>
                          <td>{{item.claimstatus}}</td>
                      </tr>
                      <tr *ngIf="pendingclaimlist.length==0">
                          <td colspan="10" style="text-align:center;"><strong class="text-danger">No data found</strong></td>
                      </tr>
                  </tbody>
              </table>
            </div>
          </div>
      </div>
  </div>
</div>


<!-- Modal Hospitalwisefloatdetails -->
<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-bs-focus="false">
    <div class="modal-dialog" style="max-width: 95%;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Hospital Wise Float Details</h5>
                <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="height: 575pt;">
                <div class="row" style="margin-top: 10px;margin-bottom: 10px;" *ngIf="modaldala?.length">
                    <div class="col-lg-4 col-xxl-4" style="padding-top: 10px; padding-left: 12px;">
                        <div class="form-group">
                            <b>Total Cases: <span style="color: green;">{{modaldala?.length}}</span></b>
                        </div>
                    </div>
                    <div class="col-lg-4 col-xxl-4" style="text-align: right; padding-top: 3px;">
                        <div class="form-group">
                            <button class="btn btn-outline-success btn-sm me-1" type="submit" (click)="downloadReports('excel')">
                                <i class="bi bi-file-earmark-spreadsheet" style="font-size: 13pt;"></i>
                            </button> &nbsp;
                            <button class="btn btn-outline-danger btn-sm me-1" type="submit" (click)="downloadReports('pdf')">
                                <i class="bi bi-file-earmark-pdf" style="font-size: 13pt;"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-lg-4 col-xxl-4">
                        <div class="input-group">
                            <input type="text" id="txtSearch" class="form-control" placeholder="Search here" name="txtSearch" [(ngModel)]="txtSearch">
                        </div>
                    </div>
                </div>
                <div class="form-cointainer" *ngIf="modaldala?.length">
                    <div class="main-tab">
                        <div class="row justify-content-between">
                            <div class="table-responsive" style="height: 505pt;">
                                <table class="table table-striped" mb-0>
                                    <thead>
                                        <tr>
                                            <th>Sl No</th>
                                            <th>Hospital Details</th>
                                            <th>District</th>
                                            <th>URN</th>
                                            <th>Invoice No</th>
                                            <th>Claim No</th>
                                            <th>Patient Name</th>
                                            <th>Gender</th>
                                            <th>Package Code</th>
                                            <th>Package Cost (&#8377;)</th>
                                            <th>Package Procedure</th>
                                            <th>Actual Date Of Admission</th>
                                            <th>Actual Date Of Discharge</th>
                                            <th>Mortality (Hospital)</th>
                                            <th>Mortality (CPD)</th>
                                            <th>Hospital Claimed Amount (&#8377;)</th>
                                            <th>Implant Data</th>
                                            <th>CPD Claim Status</th>
                                            <th>CPD Remarks</th>
                                            <th>CPD Approved Amount (&#8377;)</th>
                                            <th>SNA Claim Status</th>
                                            <th>SNA Remarks</th>
                                            <th>SNA Approved Amount(SNA/CPD) (&#8377;)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of modaldala | filter:txtSearch;index as i">
                                            <td>{{i+1}}</td>
                                            <td>{{item[1]}} ({{item[2]}})</td>
                                            <td>{{item[3]}}</td>
                                            <td>{{item[4]}}</td>
                                            <td>{{item[5]}}</td>
                                            <td>{{item[6]}}</td>
                                            <td>{{item[7]}}</td>
                                            <td>{{item[8]}}</td>
                                            <td title="{{item[10]}}"><span class="pkd">{{item[9]}}</span></td>
                                            <td>{{item[11]}}</td>
                                            <td>{{item[12]}}</td>
                                            <td>{{item[13]}}</td>
                                            <td>{{item[14]}}</td>
                                            <td>{{item[15]}}</td>
                                            <td>{{item[16]}}</td>
                                            <td>{{item[17]}}</td>
                                            <td>{{item[18]}}</td>
                                            <td>{{item[19]}}</td>
                                            <td>
                                                <span *ngIf="item[20] != '-NA-'"><a href="javascript:void(0)" (click)="show(item[20])">view</a></span>
                                                <span *ngIf="item[20] == '-NA-'">-NA-</span>
                                            </td>
                                            <td>{{item[21]}}</td>
                                            <td>{{item[22]}}</td>
                                            <td>
                                                <span *ngIf="item[23] != '-NA-'"><a href="javascript:void(0)" (click)="show(item[23])">view</a></span>
                                                <span *ngIf="item[23] == '-NA-'">-NA-</span>
                                            </td>
                                            <td>{{item[24]}}</td>
                                        </tr>
                                        <tr *ngIf="! modaldala?.length">
                                            <td colspan="18" align="center"><strong class="text-danger">No data found</strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
