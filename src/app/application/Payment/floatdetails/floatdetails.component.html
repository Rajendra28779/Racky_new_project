<div class="form-cointainer">
    <div class="main-tab">
        <div class="row justify-content-between">
            <div class="col-lg-4">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a routerLink="/application/floatdetails" class="nav-link active">Float Details</a>
                    </li>
                </ul>
            </div>
            <div class="col-lg-6 ">
                <app-utilite (receiveResponse)="getResponseFromUtil($event)"></app-utilite>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-3 col-xxl-3">
            Status : <strong>{{searchTypeValue}}</strong>
        </div>
        <div class="col-lg-3 col-xxl-3">
            Float Number : <strong>{{float}}</strong>
        </div>
        <div class="col-lg-3 col-xxl-3">
            Generated By : <strong>{{createdByName}}</strong>
        </div>
        <div class="col-lg-3 col-xxl-3">
            SNA Doctor : <strong>{{snoName}}</strong>
        </div>
    </div>
    <div style="height: 12pt;"></div>
    <div class="row">
        <div class="col-lg-3 col-xxl-3">
            <label class="control-label">Search Type</label>
            <select class="form-select" name="search" id="search" (change)="seacrchvalue($event)">
                  <option value="1" >All</option>
                  <option value="2">Less Approved Amount</option>
                  <option value="4">Bulk Approved</option>
                  <option value="5">CPD Approved cases</option>
                  <option value="6">CPD Rejected cases</option>
                  <option value="7">CPD Un-processed Cases</option>
                  <option value="8">Query by CPD</option>
                  <option value="9">Reclaimed cases</option>
                  <option value="10">Query by SNA</option>
                  <option value="3" id="remarkstatus">Remark By FO</option>
                  <option value="15">Non Observation Action</option>
                  <option value="11">Remark by Joint CEO</option>
                  <option value="12">Remark by Internal Auditor</option>
                  <option value="13">Remark by DY CEO</option>
                  <option value="14">Remark by CEO</option>
                  <!-- <option value="11">With out Fo Remark</option> -->
              </select>
        </div>
        <div class="col-lg-2 col-xxl-2">
            <label class="control-label">Search User By</label>
            <select class="form-select" name="searchUser" id="searchUser" (change)="selectUserEvent($event)">
            <option value="1">Select</option>
            <option value="2">Finance Oficer</option>
            <option value="3">Internal Auditor</option>
        </select>
        </div>
        <div class="col-lg-4 col-xxl-4">
            <label class="control-label">Search By Remark</label>
            <!-- <select class="form-select" name="search" id="search" (change)="filterFloatDetails($event)">
            <option value="" selected>All</option>
            <option *ngFor="let item of foremarkList" [value]="item.remarkid">{{item.remark}}</option>
        </select> -->
            <ng-multiselect-dropdown #multiSelect [placeholder]="placeHolder" [data]="foremarkList" [settings]="dropdownSettings" id="hospitalCode" [(ngModel)]="selectedItems" (onSelect)=onItemSelect($event) (onDeSelect)="onItemDeSelect($event)" (onSelectAll)="onSelectAll($event)"
                (onDeSelectAll)="onDeSelectAll($event)">
            </ng-multiselect-dropdown>
        </div>
    </div>
    <div style="height: 15pt;"></div>
    <div class="row" style="margin-top: 10px;margin-bottom: 10px;">
        <div class="col-lg-4 col-xxl-4" style="padding-top: 10px; padding-left: 17px;">
            <b>Total Claim Count: <span style="color: green;">{{floatDetails?.length}}</span></b>
        </div>
        <div class="col-lg-4 col-xxl-4" style="text-align: right; padding-top: 3px;">
            <button class="btn btn-outline-success btn-sm me-1" tooltip="Excel" (click)="downloadReport('excel')">
              <i class="bi bi-file-earmark-spreadsheet" style="font-size: 11pt;"></i>
          </button> &nbsp;
            <!-- <button class="btn btn-outline-danger btn-sm me-1" tooltip="pdf" (click)="downloadReport('pdf')">
              <i class="bi bi-file-earmark-pdf" style="font-size: 11pt;"></i>
          </button> -->
        </div>
        <div class="col-lg-3 col-xxl-3">
            <div class="input-group">
                <input type="text" id="txtsearchDate" class="form-control" placeholder="Search here" name="txtsearchDate" [(ngModel)]="txtsearchDate" maxlength="50" autocomplete="off">
            </div>
        </div>
    </div>
    <div class="content-box p-0 overflow-hidden">
        <div class="table-responsive">
            <table class="table table-sm mb-0" style="list-style-position: inside;">
                <thead>
                    <tr>
                        <th>Sl No</th>
                        <th>Hospital Code</th>
                        <th>Hospital Name</th>
                        <th>District</th>
                        <th>Incentive Status Blocking</th>
                        <th>GJAY Incentive Status </th>
                        <th>URN</th>
                        <th>Invoice No</th>
                        <th>Claim No</th>
                        <!-- <th>Case No</th> -->
                        <th>Patient Name</th>
                        <th>Gender</th>
                        <th>Package Code</th>
                        <th>Package Name</th>
                        <th>Package Cost (&#8377;)</th>
                        <th>Package Procedure</th>
                        <th>Actual Date Of Admission</th>
                        <th>Actual Date Of Discharge</th>
                        <th>Mortality (Hospital)</th>
                        <th>Mortality (CPD)</th>
                        <th>Hospital Claimed Amount (&#8377;)</th>
                        <th>Implant Data</th>
                        <th>CPD Claim Status</th>
                        <th>CPD Remarks</th>
                        <th>CPD Approved Amount (&#8377;)</th>
                        <th>SNA Claim Status</th>
                        <th>SNA Remarks</th>
                        <th>M And E Remarks</th>
                        <th>SNA Approved Amount(SNA/CPD) (&#8377;)</th>
                        <th *ngIf="isJCFR">Joint CEO Finance Remarks</th>
                        <th *ngIf="isFR">FO Remarks</th>
                        <th *ngIf="isIARRC">Internal Auditor Remarks (Revert Case)</th>
                        <th *ngIf="isJCFRRC">Joint CEO Finance Remarks (Revert Case)</th>
                        <th *ngIf="isNR">Nodal Officer Remark</th>
                        <th *ngIf="isNORAM">Nodal officer Revised Approved Amount (&#8377;)</th>
                        <th *ngIf="isJCRVA">Joint CEO Remarks (Verification again)</th>
                        <th *ngIf="isFFR">Final FO Remarks</th>
                        <th *ngIf="isIAR">Internal Auditor Remarks</th>
                        <th *ngIf="isDCFR">DY. CEO Finance Remarks</th>
                        <th *ngIf="isFJCR">Final Joint CEO Remarks</th>
                        <th *ngIf="isCEORRC">CEO Remark Revert Case</th>
                        <th *ngIf="isSNARRC">SNA Remark Revert Case</th>
                        <th *ngIf="isCEOR">CEO Remark</th>
                        <!-- <th *ngIf="isSNAFR">SNA Final Remark</th> -->

                        <th class="text-center">Details</th>
                        <th id="action" *ngIf="hideBtn">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <ng-container *ngFor="let item of floatDetails| filter:txtsearchDate | paginate: {id: 'listing_pagination', itemsPerPage: pageElement, currentPage: currentPage}; index as i">
                        <tr title="{{item.previousFloat}}" id="tags{{i}}" [ngClass]="item.colorStatus ==true? {'green':true}:item.colorStatus ==false? {'red':true}:{'default':true}">
                            <td *ngIf="currentPage==1">{{i+1}}</td>
                            <td *ngIf="currentPage!=1">{{(currentPage-1)*pageElement+i+1}}</td>
                            <td>{{item.hospitalCode}}</td>
                            <td>{{item.hospitalName}}</td>
                            <td>{{item.districtName}}</td>
                            <td>{{item.incenticeStatusBlocking}}</td>
                            <td>{{item.incenticeStatus}}</td>
                            <td>{{item.urn}}</td>
                            <td>{{item.invoiceNo}}</td>
                            <td>{{item.claimNo}}</td>
                            <!-- <td>{{item.caseNo}}</td> -->
                            <td>{{item.patientName}}</td>
                            <td>{{item.gender}}</td>
                            <td><span class="pkd">{{item.packageCode}}</span></td>
                            <td><span class="pkd">{{item.packageName}}</span></td>
                            <td>{{item.packageCost | currencyInr}}</td>
                            <td>{{item.procedureName}}</td>
                            <td>{{item.actualDateOfAdmission!=null?item.actualDateOfAdmission:"N/A"}}</td>
                            <td>{{item.actualDateOfDischarge!=null?item.actualDateOfDischarge:"N/A"}}</td>
                            <td>{{item.mortality?item.mortality:'N/A'}}</td>
                            <td>{{item.cpdMortality?item.cpdMortality:'N/A'}}</td>
                            <td *ngIf="!item.totalAmountClaimed">N/A</td>
                            <td *ngIf="item.totalAmountClaimed">{{item.totalAmountClaimed | currencyInr}}</td>
                            <td>{{item.implantData?item.implantData:'N/A'}}</td>
                            <td>{{item.cpdClaimStatus?item.cpdClaimStatus:'N/A'}}</td>
                            <td>{{item.cpdRemarks?item.cpdRemarks:'N/A'}}</td>
                            <td *ngIf="!item.cpdApprovedAmount">N/A</td>
                            <td *ngIf="item.cpdApprovedAmount">{{item.cpdApprovedAmount | currencyInr}}</td>
                            <td>{{item.snaClaimStatus?item.snaClaimStatus:'N/A'}}</td>
                            <td>{{item.snaRemarks?item.snaRemarks:'N/A'}}</td>
                            <td>{{item.meremark}}</td>
                            <td *ngIf="!item.snoApprovedAmount">N/A</td>
                            <td *ngIf="item.snoApprovedAmount">{{item.snoApprovedAmount | currencyInr}}</td>
                            <td *ngIf="isJCFR">{{item.jointCeoRemarks?item.jointCeoRemarks:'N/A'}}</td>
                            <td *ngIf="isFR">{{item.foRemarks?item.foRemarks:'N/A'}}</td>
                            <td *ngIf="isIARRC">{{item.iarRevertCase?item.iarRevertCase:'N/A'}}</td>
                            <td *ngIf="isJCFRRC">{{item.jointCeoRemarksRevert?item.jointCeoRemarksRevert:'N/A'}}</td>
                            <td *ngIf="isNR">{{item.noRemarks?item.noRemarks:'N/A'}}</td>
                            <td *ngIf="!item.noApprovedAmount && isNORAM">N/A</td>
                            <td *ngIf="item.noApprovedAmount && isNORAM">{{item.noApprovedAmount | currencyInr}}</td>
                            <td *ngIf="isJCRVA">{{item.jointCeoRemarksVerify?item.jointCeoRemarksVerify:'N/A'}}</td>
                            <td *ngIf="isFFR">{{item.finalFoRemarks?item.finalFoRemarks:'N/A'}}</td>
                            <td *ngIf="isIAR">{{item.audRemarks?item.audRemarks:'N/A'}}</td>
                            <td *ngIf="isDCFR">{{item.dyceoRemarks?item.dyceoRemarks:'N/A'}}</td>
                            <td *ngIf="isFJCR">{{item.jointCeoRemarksFinal?item.jointCeoRemarksFinal:'N/A'}}</td>
                            <td *ngIf="isCEORRC">{{item.ceoremarkrevertcase?item.ceoremarkrevertcase:'N/A'}}</td>
                            <td *ngIf="isSNARRC">{{item.snaremarkrevertcase?item.snaremarkrevertcase:'N/A'}}</td>
                            <td *ngIf="isCEOR">{{item.ceoremark?item.ceoremark:'N/A'}}</td>
                            <!-- <td *ngIf="isSNAFR">{{item.snafinalremark?item.snafinalremark:'N/A'}}</td> -->
                            <!-- <td width="150">{{item.foRemarks!=null?item.foRemarks:'-NA-'}}</td>
                          <td class="text-center">
                              <a class="btn btn-outline-success btn-sm me-1" data-bs-toggle="modal" data-bs-target="#modaldatabindnng"
                                  (click)="viewDescription(item.claimId)">View</a>
                          </td> -->
                            <td class="text-center">
                                <a class="btn btn-outline-success btn-sm" (click)="getActionDetails(item.claimId,item.urn,item.floatNumber)">Detail</a>
                            </td>
                            <td class="text-center" *ngIf="hideBtn">
                                <button class="btn btn-outline-primary btn-sm-edit" id="butto11" (click)="updateRemarks(item)">
                                  <i class="bi bi-pencil"></i>
                              </button>
                            </td>
                        </tr>
                    </ng-container>
                    <tr *ngIf="floatDetails?.length">
                        <td>Total</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>{{totalpackagecost}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>{{totalamountclaimed}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>{{totalcpdApprovedAmount}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>{{totalApprovedAmount}}</td>
                        <td *ngIf="isJCFR"></td>
                        <td *ngIf="isFR"></td>
                        <td *ngIf="isIARRC"></td>
                        <td *ngIf="isJCFRRC"></td>
                        <td *ngIf="isNR"></td>
                        <td *ngIf="isNORAM">{{totalnoapprovedamount}}</td>
                        <td *ngIf="isJCRVA"></td>
                        <td *ngIf="isFFR"></td>
                        <td *ngIf="isIAR"></td>
                        <td *ngIf="isDCFR"></td>
                        <td *ngIf="isFJCR"></td>
                        <td *ngIf="isCEORRC"></td>
                        <td *ngIf="isSNARRC"></td>
                        <td *ngIf="isCEOR"></td>
                        <td></td>
                        <td *ngIf="hideBtn"></td>
                    </tr>
                    <tr *ngIf="floatDetails.length==0">
                        <td colspan="37" class="text-center text-uppercase"><strong class="text-danger">No Data Found !!</strong></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="row" style="margin-top: 20px;" *ngIf="showPegi">
        <div class="col-sm-6">
            <div class="col-sm-*">
                show
                <select id="pageItem" name="pageItem" class="custom-select-sm" (change)="pageItemChange()">
                  <option value="50">50</option>
                  <option value="100">100</option>
                  <option value="150">150</option>
                  <option value="200">200</option>
                  <option value={{floatDetails?.length}}>All</option>
              </select> entries
            </div>
        </div>
        <div class="col-sm-6 text-right">
            <pagination-controls id="listing_pagination" class="text-end" [maxSize]="20" [directionLinks]="true" (pageChange)="currentPage = $event" (pageBoundsCorrection)="onPageBoundsCorrection($event)"></pagination-controls>
        </div>
    </div>
    <div class="d-flex justify-content-between py-1" *ngIf="hideStatus">
        <div class="col-lg-3 col-xxl-3">
            <select class="form-select" aria-label="Disabled select example" name="verifySelect" id="verifySelect" (change)="seacrchVerifySelect($event)">
              <option value="" selected>Please Select</option>
              <option *ngIf="hideOption" value="1">Verify</option>
              <option *ngIf="hideOption" value="2">Observation</option>
              <option *ngIf="!hideOption" value="3">Observation</option>
          </select>
        </div>
        &nbsp;&nbsp;
        <div class="col-lg-3 col-xxl-3" *ngIf="hideStatus">
            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#floatForwardModal" *ngIf="showSubmit" (click)="submitByFo()">Submit</button>
            <button class="btn btn-success" *ngIf="!showSubmit" (click)="submitByFo()">Submit</button>
            <!-- <button class="btn btn-outline-success btn-sm-edit" (click)="verify()">Forward to SNA</button>   -->
        </div>
        <div class="col-lg-6 col-xxl-6"></div>
    </div>

    <div class="modal modal-custom-backdrop" id="exampleOtpModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body py-5">

                    <div class="row">
                        <div class="col-md-12 col-lg-12">
                            <label class="form-label text-success">Claim Number: <span style="color:black;">{{claimnumber}}</span></label><br>
                            <label class="form-label text-success">Hospital Name: <span style="color:black;">{{hospitalName}}({{hospitalcode}})</span></label><br>
                            <label class="form-label text-success">URN : <span style="color:black;">{{urnnumber}}</span></label><br>
                            <label class="form-label text-success">Patient Name: <span style="color:black;">{{patientName}}</span></label><br>
                            <label class="form-label text-success">CPD Approved Amount: <span style="color:black;">{{cpdapprovedamount}}</span></label><br>
                            <label class="form-label text-success">SNA Approved Amount:<span style="color:black;">{{snaAprvAmount}}</span></label><br>
                            <label class="form-label text-success">Remarks
                              <!-- <span class="form-label text-danger">*</span> -->
                            </label>
                            <div class="col-md-12 col-lg-12" *ngIf="showRemark">
                                <select class="form-select" aria-label="Disabled select example" name="remarkSelect" id="remarkSelect">
                                        <option value="" selected>Please Select Remark</option>
                                        <option *ngFor="let item of foremarkList" [value]="item.remarkid">{{item.remark}}</option>
                                    </select>
                            </div><br>
                            <div class="col-md-12 col-lg-12">
                                <textarea rows="4" cols="42" id="remarks" formControlName="finalRemarks" maxlength="1000" placeholder="Enter Description" #myInput [maxlength]="maxChars" (keypress)="keyPress($event)"></textarea><br>
                                <span class="text-danger small">Characters Remaining: {{maxChars - myInput.value.length}}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer d-flex justify-content-center align-items-center">
                    <button type="button" id="sendId" class="btn btn-success" (click)="submit()">Submit</button>
                    <button type="button" id="sendId" class="btn btn-danger" (click)="cancel()">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- Modal -->
<div class="modal fade" id="floatForwardModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-bs-focus="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">
                    <span>Add Remarks</span>
                </h5>
                <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="cancel()"></button>
            </div>
            <div class="modal-body">
                <div class="row" [formGroup]="myGroups">
                    <div class="col-lg-12 col-xxl-12" style="padding-top: 10px; padding-left: 17px;">
                        <!-- <b>Remarks<span class="text-danger">*</span></b> -->
                    </div>
                    <div class="col-lg-12 col-xxl-12" style="padding-top: 10px;">
                        <textarea class="form-control" rows="4" id="floatRemark" name="floatRemark" formControlName="remarks" placeholder="Enter Remarks" #myInput [maxlength]="maxChars" (keypress)="keyPress($event)"></textarea>
                        <span class="text-danger small">Characters Remaining: {{maxChars - myInput.value.length}}</span>
                    </div>
                    <div class="col-lg-12 col-xxl-12" style="padding-top: 10px;" *ngIf="hideOption">
                        <input type="file" class="upload " id="floatfile" accept=".pdf,.xls" (change)="changeFloatFile($event)"><br/>
                        <span class="text-danger small">Please upload the document(Execl/PDF/JPG) below 10 MB.</span>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col align-self-end">
                        <div class="col-lg-12">
                            <button class="btn btn-success" (click)="submitByFoModal()">Forward</button> &nbsp;
                            <button class="btn btn-danger" data-bs-dismiss="modal" aria-label="Close" (click)="cancel()">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
