<div class="form-cointainer claim-detail">
    <div class="main-tab">
        <div class="row justify-content-between">
            <div class="col-lg-4">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a routerLink="/application/oldClaimResettlement/action" routerLinkActive="active" class="nav-link active">Old Claim Resettlement</a>
                    </li>
                </ul>
            </div>
            <div class="col-lg-6 ">
                <app-utilite (receiveResponse)="getResponseFromUtil($event)"></app-utilite>
            </div>
        </div>
    </div>
    <div class="content-box p-0 border-0 bg-transparent">
        <div class="row">
            <div class="col-lg-6 col-xl-6 col-xxl-4">
                <div class="card shadow-sm basic-info">
                    <div class="card-header">
                        <h5 class="mb-0">Basic Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3 border-bottom pb-3">
                            <span class="text-success"><i class="iconbsky-hospital fs-1 me-3"></i></span>
                            <div>
                                <p class="mb-0 fw-bold">{{claimDetails?.HOSPITALNAME}} ({{ claimDetails?.HOSPITALCODE
                                    }})<br>
                                    {{claimDetails?.HOSPITALADDRESS}}</p>
                            </div>
                        </div>
                        <div class="row border-bottom mb-3 pb-3">
                            <div class="col-lg-12">
                                <div class="d-flex align-items-center border-end">
                                    <span class="text-success"><i class="iconbsky-urn-number fs-1 me-3"></i></span>
                                    <div>
                                        <p class="text-muted mb-0">URN</p>
                                        <p class="mb-0 fw-bold">{{claimDetails?.URN}}</p>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        <div class="row border-bottom mb-3 pb-3">
                            <div class="d-flex align-items-center">
                                <span class="text-success"><i class="iconbsky-invoice-number fs-1 me-3"></i></span>
                                <div>
                                    <p class="text-muted mb-0">Blocking Invoice Number</p>
                                    <p class="mb-0 fw-bold">{{claimDetails?.INVOICENO}}</p>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="d-flex align-items-center">
                            <span class="text-success"><i class="iconbsky-invoice-number fs-1 me-3"></i></span>
                            <div>
                                <p class="text-muted mb-0">Claim Number</p>
                                <p class="mb-0 fw-bold">{{claimDetails?.CLAIMNO}}</p>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-xl-6 col-xxl-4">
                <div class="card text-bg-success patient-info shadow-sm">
                    <div class="card-header">
                        <h5 class="mb-0">Patient Information</h5>
                    </div>
                    <div class="card-body py-xl-4">
                        <div class="row">
                            <div class="col-lg-12">
                                <h4 class="fw-normal mb-3">{{claimDetails?.PATIENTNAME}}</h4>
                                <ul class="list-unstyled mb-0">
                                    <li><i class="iconbsky-age"></i> {{claimDetails?.AGE}} Years</li>
                                    <li *ngIf=" claimDetails?.GENDER=='F' "><i class="iconbsky-gender"></i> Female</li>
                                    <li *ngIf=" claimDetails?.GENDER=='M' "><i class="iconbsky-gender"></i> Male</li>
                                    <li><i class="iconbsky-mobile"></i> {{claimDetails?.MOBILE}} </li>
                                    <li><i class="iconbsky-location"></i> {{claimDetails?.Address}} </li>
                                </ul>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="card shadow-sm mt-3 mt-xl-4 ">
                    <div class="card-header">
                        <h5 class="mb-0">Treatment Details</h5>
                    </div>
                    <div class="card-body">
                        <div class="row gx-xl-5 treatment-details">
                            <div class="col-xl">
                                    <p class="small text-muted mb-0">Date of Admission - Date of Discharge
                                </p>
                                <h6 class="mb-0"><i class="iconbsky-calendar small"></i> {{claimDetails?.DATEOFADMISSION
                                    | date: 'dd-MMM-yyyy'}} -

                                    <i class="iconbsky-calendar small ps-2"></i> {{claimDetails?.DATEOFDISCHARGE | date:
                                    'dd-MMM-yyyy'}}
                                </h6>
                            </div>
                            <div class="col-xl border-start">
                                <div class="col-xl">
                                    <p class="small text-muted mb-0">Actual Date of Admission and Discharge</p>
                                    <h6 class="mb-0"><i class="iconbsky-calendar small"></i>
                                        {{claimDetails?.ACTUALDATEOFADMISSION | date: 'dd-MMM-yyyy'}} -

                                        <i class="iconbsky-calendar small ps-2"></i> {{claimDetails?.ACTUALDATEOFDISCHARGE |
                                        date: 'dd-MMM-yyyy'}}
                                    </h6>
                                </div>
                            </div>
                            <div class="col-xl border-start">
                                <div class="d-flex align-items-center">
                                    <div>
                                        <p class="small text-muted mb-0">Package Rate (₹)</p>
                                        <h6 class="mb-0"> {{ claimDetails?.PACKAGERATE | currency:"":"" }}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start">
                                <div class="d-flex align-items-center">
                                    <div>
                                        <p class="small text-muted mb-0">Blocked Amount (₹)</p>
                                        <h6 class="mb-0 ">{{ claimDetails?.TOTALAMOUNTBLOCKED | currency:"":""}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <hr class="mt-xl-4">
                            </div>

                            <div class="col-lg-3 ">
                                <div class="d-flex align-items-center">
                                    <div>
                                        <p class="small text-muted mb-0">Procedure</p>
                                        <h6 class="mb-0">{{claimDetails?.PROCEDURENAME}}
                                        </h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 border-start">
                                <div class="d-flex align-items-center">
                                    <div>
                                        <p class="small text-muted mb-0">Packages</p>
                                        <h6 class="mb-0">{{claimDetails?.PACKAGENAME}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start">
                                <div class="d-flex align-items-center">
                                    <div>
                                        <p class="small text-muted mb-0">Package Code</p>
                                        <h6 class="mb-0"> {{ claimDetails?.PackageCode}}</h6>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-xl border-start">
                                <div class="d-flex align-items-center">
                                    <div>
                                        <p class="small text-muted mb-0">Referral Code</p>
                                        <h6 class="mb-0 ">{{ claimDetails?.REFERRALCODE }}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <hr class="mt-xl-4">
                            </div>
                            <div class="col-xl border-start">
                                <div class="d-flex align-items-center">
                                    <div>
                                        <p class="small text-muted mb-0">NABH Flag</p>
                                        <h6 class="mb-0 ">{{ claimDetails?.NABHFlag }}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start">
                                <div class="d-flex align-items-center">
                                    <div>
                                        <p class="small text-muted mb-0">Implant Data</p>
                                        <h6 class="mb-0 ">{{ claimDetails?.IMPLANTDATA }}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">Claim Status</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.CLAIMSTATUS}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">Approved Amount</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.APPROVEDAMOUNT | currency:'':'' }}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <hr class="mt-xl-4">
                            </div>
                            <div class="col-xl ">
                                <p class="small text-muted mb-0 "> Approved Date
                                </p>
                                <h6 class="mb-0">{{claimDetails?.APPROVEDDATE | date :'dd-MMM-yyyy'}} </h6>
                            </div>

                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 "> Paid By</p>
                                        <h6 class="mb-0 ">{{claimDetails?.PAIDBY}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">CHECK/DD NO</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.CHECK_DDNO}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">Bank Name</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.BANKNAME}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 ">
                                <hr class="mt-xl-4 ">
                            </div>
                            <div class="col-xl ">
                                <p class="small text-muted mb-0 "> Paid Date
                                </p>
                                <h6 class="mb-0">{{claimDetails?.PAIDDATE | date :'dd-MMM-yyyy'}} </h6>
                            </div>

                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 "> Remarks</p>
                                        <h6 class="mb-0 ">{{claimDetails?.REMARKS}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">Rejected Date</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.REJECTEDDATE | date :'dd-MMM-yyyy'}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">Investigation Date</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.INVESTIGATIONDATE | date :'dd-MMM-yyyy'}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 ">
                                <hr class="mt-xl-4 ">
                            </div>
                            <div class="col-xl ">
                                <p class="small text-muted mb-0 "> SNA Claim Status
                                </p>
                                <h6 class="mb-0">{{claimDetails?.SNACLAIMSTATUS}} </h6>
                            </div>

                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 "> SNA Approved Amount</p>
                                        <h6 class="mb-0 ">{{claimDetails?.SNAAPPROVEDAMOUNT}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">SNA Approved Date</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.SNAAPPROVEDDATE | date :'dd-MMM-yyyy'}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">SNA Rejected Date</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.SNAREJECTEDDATE | date :'dd-MMM-yyyy'}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 ">
                                <hr class="mt-xl-4 ">
                            </div>
                            <div class="col-xl ">
                                <p class="small text-muted mb-0 "> SNA Investigation Date
                                </p>
                                <h6 class="mb-0">{{claimDetails?.SNAINVESTIGATIONDATE | date :'dd-MMM-yyyy'}} </h6>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 "> SNA Remarks</p>
                                        <h6 class="mb-0 ">{{claimDetails?.SNAREMARKS}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">TPA Final Status</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.TPAFINALSTATUS}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">TPA Final Decision Date</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.TPAFINALDECISIONDATE | date :'dd-MMM-yyyy'}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 ">
                                <hr class="mt-xl-4 ">
                            </div>
                            <div class="col-xl ">
                                <p class="small text-muted mb-0 "> Revert Remarks
                                </p>
                                <h6 class="mb-0">{{claimDetails?.REVERTREMARKS}} </h6>
                            </div>

                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 "> SNA Final Status</p>
                                        <h6 class="mb-0 ">{{claimDetails?.SNAFINALSTATUS}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl border-start ">
                                <div class="d-flex align-items-center ">
                                    <div>
                                        <p class="small text-muted mb-0 ">SNA Final Decision Date</p>
                                        <h6 class="mb-0 ">
                                            {{claimDetails?.SNAFINALDECISIONDATE | date :'dd-MMM-yyyy'}}</h6>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <hr class="my-xl-4">
                                <h5>Pre-Auth Log</h5>
                                <div class="table-responsive">
                                    <table class="table mb-0" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th width="40" rowspan="2">Sl#</th>

                                                <th rowspan="2">Pre-Auth Code</th>
                                                <th rowspan="2">Claimed Amount (₹)</th>
                                                <th rowspan="2">Approved Amount (₹)</th>
                                                <th rowspan="2">Claimed Date</th>
                                                <th rowspan="2">Approved Date</th>
                                                <th rowspan="2">Remark</th>
                                                <th colspan="3" style="text-align:center">Documents</th>
                                                <th rowspan="2">Details</th>
                                            </tr>
                                            <tr>
                                                <th>Doc1</th>
                                                <th>Doc2</th>
                                                <th>Doc3</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngIf="check">
                                                <tr *ngFor="let prteAuth of preAuth,index as i">
                                                    <td>{{i+1}}</td>

                                                    <td>{{prteAuth.preauthCode}}</td>
                                                    <td>{{prteAuth.claimedAmount | currency:"":""}}</td>
                                                    <td>{{prteAuth.approvedAmount | currency:"":""}}</td>
                                                    <td>{{prteAuth.claimedDate | date :'dd-MMM-yyyy'}}</td>
                                                    <td>{{prteAuth.approvedDate | date :'dd-MMM-yyyy'}}</td>
                                                    <td>{{prteAuth.preAuthRemarks}}</td>
                                                    <td *ngIf="prteAuth.aditionalDoc1 != undefined"><a href="javascript:void(0);" (click)="downloadAction($event,prteAuth.aditionalDoc1,prteAuth.hospitalCode,prteAuth.claimedDate,'')"><i class="bi bi-file-earmark-pdf" style="color:red;font-size:15px;"></i></a></td>
                                                    <td *ngIf="prteAuth.aditionalDoc1 == undefined">--</td>
                                                    <td *ngIf="prteAuth.aditionalDoc2 != undefined"><a href="javascript:void(0);" (click)="downloadAction($event,prteAuth.aditionalDoc2,prteAuth.hospitalCode,prteAuth.claimedDate,'')"><i class="bi bi-file-earmark-pdf" style="color:red;font-size:15px;"></i></a></td>
                                                    <td *ngIf="prteAuth.aditionalDoc2 == undefined">--</td>
                                                    <td *ngIf="prteAuth.aditionalDoc3 != undefined"><a href="javascript:void(0);" (click)="downloadAction($event,prteAuth.aditionalDoc3,prteAuth.hospitalCode,prteAuth.claimedDate,'')"><i class="bi bi-file-earmark-pdf" style="color:red;font-size:15px;"></i></a></td>
                                                    <td *ngIf="prteAuth.aditionalDoc3 == undefined">--</td>
                                                    <td><a href="javascript:void(0)" (click)="preAuthLogDetails(prteAuth.urnNo,claimDetails?.AUTHORIZEDCODE,prteAuth.hospitalCode)">Click here</a></td>
                                                </tr>
                                            </ng-container>
                                            <tr *ngIf="!check">
                                                <td colspan="8" align="center"><strong class="text-danger">No data found</strong></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-lg-12">
                <div class="card shadow-sm document-upload">
                      <div class="card-header row col-lg-12">
                      <div class="col-lg-10">
                        <h5>Old Documents Submitted</h5>
                      </div>
                      <!-- <div class="col-lg-2">
                        <button class="btn btn-success" style="float: right" (click)="viewAllDocument(claimDetails?.DISCHARGESLIP,claimDetails?.ADITIONALDOCS,claimDetails?.ADITIONAL_DOC1,claimDetails?.ADITIONAL_DOC2,claimDetails?.INVESTIGATIONDOC,claimDetails?.INVESTIGATIONDOC2, claimDetails?.PRESURGERYPHOTO, claimDetails?.POSTSURGERYPHOTO, claimDetails?.PATIENT_PHOTO, claimDetails?.INTRA_SURGERY_PHOTO, claimDetails?.SPECIMEN_REMOVAL_PHOTO)"><span class="bi bi-download" style="margin-right: 5px;"></span>Download All</button>
                      </div> -->
                    </div>
                    <div class="card-body uploaded-doc">
                        <div class="row gx-5 justify-content-between">
                            <div class="col-lg-6 col-xxl-6 border-end pt-xl-2">
                                <div class="row">
                                    <div class="col-6 col-lg-3 col-xxl-3 text-center mb-4" *ngIf="claimDetails?.FILENAMES != undefined">
                                        <a href="javascript:void(0);"
                                            (click)="OlddownloadAction($event,claimDetails?.FILENAMES,claimDetails?.HOSPITALCODE1,claimDetails?.year)">
                                            <img src="../../../../assets/img/pdf.png" alt="Admission Slip" class="mb-2">
                                            <span class="d-block">Document 1</span>
                                        </a>
                                    </div>
                                    <div style="margin-top: 12%;" class="col-6 col-lg-3 col-xxl-3 text-center mb-4"
                                        *ngIf="claimDetails?.FILENAMES == undefined">
                                        <span class="d-block">--</span>
                                        <span class="d-block">Document 1</span>
                                    </div>
                                    <div class="col-6 col-lg-3 col-xxl-3 text-center mb-4"
                                        *ngIf="claimDetails?.FILENAMES1 != undefined">
                                        <a href="javascript:void(0);"
                                            (click)="OlddownloadAction($event,claimDetails?.FILENAMES1,claimDetails?.HOSPITALCODE1,claimDetails?.year)">
                                            <img src="../../../../assets/img/pdf.png" alt="Admission Slip" class="mb-2">
                                            <span class="d-block">Document 2</span>
                                        </a>
                                    </div>
                                    <div style="margin-top: 12%;" class="col-6 col-lg-3 col-xxl-3 text-center mb-4"
                                        *ngIf="claimDetails?.FILENAMES1 == undefined">
                                        <span class="d-block">--</span>
                                        <span class="d-block">Document 2</span>
                                    </div>
                                    <div class="col-6 col-lg-3 col-xxl-3 text-center mb-4"
                                        *ngIf="claimDetails?.FILENAMES2 != undefined">
                                        <a href="javascript:void(0);"
                                            (click)="OlddownloadAction($event,claimDetails?.FILENAMES2,claimDetails?.HOSPITALCODE1,claimDetails?.year)">
                                            <img src="../../../../assets/img/pdf.png" alt="Admission Slip" class="mb-2">
                                            <span class="d-block">Document 3</span>
                                        </a>
                                    </div>
                                    <div style="margin-top: 12%;" class="col-6 col-lg-3 col-xxl-3 text-center mb-4"
                                        *ngIf="claimDetails?.FILENAMES2 == undefined">
                                        <span class="d-block">--</span>
                                        <span class="d-block">Document 3</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-lg-12">
                <div class="card shadow-sm document-upload">
                      <div class="card-header row col-lg-12">
                      <div class="col-lg-10">
                        <h5>Latest Document Submitted</h5>
                      </div>
                      <div class="col-lg-2">
                        <!-- <button class="btn btn-success" style="float: right" (click)="viewAllDocument(claimDetails?.DISCHARGESLIP,claimDetails?.ADITIONALDOCS,claimDetails?.ADITIONAL_DOC1,claimDetails?.ADITIONAL_DOC2,claimDetails?.INVESTIGATIONDOC,claimDetails?.INVESTIGATIONDOC2, claimDetails?.PRESURGERYPHOTO, claimDetails?.POSTSURGERYPHOTO, claimDetails?.PATIENT_PHOTO, claimDetails?.INTRA_SURGERY_PHOTO, claimDetails?.SPECIMEN_REMOVAL_PHOTO)"><span class="bi bi-download" style="margin-right: 5px;"></span>Download All</button> -->
                      </div>
                    </div>
                    <div class="card-body uploaded-doc">
                        <div class="row gx-5 justify-content-between">
                            <div class="col-lg-6 col-xxl-6 border-end pt-xl-2">
                                <div class="row">
                                    <div class="col-6 col-lg-3 col-xxl-3 text-center mb-4"
                                        *ngIf="claimDetails?.ADITIONAL_DOC1 != undefined">
                                        <a href="javascript:void(0);"
                                            (click)="downloadAction($event,claimDetails?.ADITIONAL_DOC1,claimDetails?.HOSPITALCODE,claimDetails?.DATEOFADMISSION)">
                                            <img src="../../../../assets/img/pdf.png" alt="Admission Slip" class="mb-2">
                                            <span class="d-block">Additional Docs 1</span>
                                        </a>
                                    </div>
                                    <div style="margin-top: 12%;" class="col-6 col-lg-3 col-xxl-3 text-center mb-4"
                                        *ngIf="claimDetails?.ADITIONAL_DOC1 == undefined">
                                        <span class="d-block">--</span>
                                        <span class="d-block">Additional Docs 1</span>
                                    </div>
                                    <div class="col-6 col-lg-3 col-xxl-3 text-center mb-4"
                                        *ngIf="claimDetails?.ADITIONAL_DOC2 != undefined">
                                        <a href="javascript:void(0);"
                                            (click)="downloadAction($event,claimDetails?.ADITIONAL_DOC2,claimDetails?.HOSPITALCODE,claimDetails?.DATEOFADMISSION)">
                                            <img src="../../../../assets/img/pdf.png" alt="Admission Slip" class="mb-2">
                                            <span class="d-block">Additional Docs 2</span>
                                        </a>
                                    </div>
                                    <div style="margin-top: 12%;" class="col-6 col-lg-3 col-xxl-3 text-center mb-4"
                                        *ngIf="claimDetails?.ADITIONAL_DOC2 == undefined">
                                        <span class="d-block">--</span>
                                        <span class="d-block">Additional Docs 2</span>
                                    </div>
                                </div>
                            </div>
                            
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-lg-12">
                <div class="card shadow-sm treatment-history">
                    <div class="card-header">
                        <h5 class="mb-0">Old Treatment History</h5>
                    </div>
                    <div class="card-body">
                        <!-- <ul class="list-unstyled">
                            <li><i class="iconbsky-list-icon me-2"></i> Check all discharged treatment information.
                                </li>
                                <div class="content-box">
                                    <div class="row">
                                        <div class="table-responsive">
                                            <table class="table mb-0" id="treatmentTable">
                                                <thead>
                                                    <tr>
                                                        <th width="50">Sl#</th>
                                                        <th>Claim No.</th>
                                                        <th>URN</th>
                                                        <th>Package Code</th>
                                                        <th>Patient Name</th>
                                                        <th>Hospital Name</th>
                                                        <th>Admission Date</th>
                                                        <th>Actual Admission Date</th>
                                                        <th>Discharge Date</th>
                                                        <th>Actual Discharge Date</th>
                                                        <th>Hospital Claim Amount(₹)</th>
                                                        <th>CPD Approved Amount(₹)</th>
                                                        <th>SNA Approved Amount(₹)</th>
                                                        <th>Status</th>
                                                        <th>CPD Name</th>
                                                        <th>Action</th>
                                                        <th>Details</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <ng-container *ngIf="trtData?.length">
                                                        <tr *ngFor="let item of trtData; index as i">
                                                            <td>{{i+1}}</td>
                                                            <td width="100" *ngIf="item.claimNo!=null">{{item.claimNo}}</td>
                                                            <td width="100" *ngIf="item.claimNo==null"></td>
                                                            <td width="100">{{item.urn}}</td>
                                                            <td width="100" title={{item.packagename}}>{{item.packagecode}}</td>
                                                            <td width="100">{{item.patientname}}</td>
                                                            <td width="100">{{item.hospitalName}} ({{item.hospitalCode}})</td>
                                                            <td width="100">{{item.dateofadmission}}</td>
                                                            <td width="100">{{item.actualdateofadmission}}</td>
                                                            <td width="100">{{item.dateofdischarge}}</td>
                                                            <td width="100">{{item.actualdateofdischarge}}</td>
                                                            <td width="100">{{item.totalamountclaimed}}</td>
                                                            <td width="100" *ngIf="item.cpdapprovedamount==null"></td>
                                                            <td width="100" *ngIf="item.cpdapprovedamount!=null">{{item.cpdapprovedamount}}</td>
                                                            <td width="100" *ngIf="item.snoapprovedamount==null"></td>
                                                            <td width="100" *ngIf="item.snoapprovedamount!=null">{{item.snoapprovedamount}}</td>
                                                            <td width="100">{{item.actiontype}}</td>
                                                            <td width="150" *ngIf="item.cpdName!=null">{{item.cpdName}}</td>
                                                            <td width="150" *ngIf="item.cpdName==null"></td>
                                                            <td width="150" *ngIf="item.transactiondetailsid==txnId  || item.pendingAt!=2"></td>
                                                            <td width="150" *ngIf="item.transactiondetailsid!=txnId && item.pendingAt==2"><a class="btn btn-outline-success btn-sm"
                                                                (click)="onAction(item.transactiondetailsid,item.urn,item.packagecode,item.claimStatus)">Action</a></td>
                                                            <td width="100"><a href="javascript:void(0)"
                                                                    (click)="getDetails(item.transactiondetailsid,item.claimid,item.claimRaiseStatus,item.urn,item.packagecode)">Click
                                                                    here</a></td>
                                                        </tr>
                                                    </ng-container>
                                                    <tr *ngIf="! trtData?.length">
                                                        <td colspan="8" align="center" *ngIf="isVisible"><strong class="text-danger">No data
                                                                found</strong></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                        </ul> -->
                        <ul class="list-unstyled">
                            <li><i class="iconbsky-list-icon me-2"></i> Check Old Claim information.
                                </li>
                                <div class="content-box">
                                    <div class="row">
                                        <div class="table-responsive">
                                            <table class="table mb-0" id="oldTreatmentTable">
                                                <thead>
                                                    <tr>
                                                        <th width="50">Sl#</th>
                                                        <th>URN</th>
                                                        <!-- <th>Chip Serial No.</th> -->
                                                        <th>Patient Name</th>
                                                        <th>Hospital Name</th>
                                                        <th>Date of Admission</th>
                                                        <th>Actual Date of Admission</th>
                                                        <th>Date of Discharge</th>
                                                        <th>Actual Date of Discharge</th>
                                                        <th>Claim Status</th>
                                                        <th>Approved Amount(₹)</th>
                                                        <th>Approved Date</th>
                                                        <th>SNA Approved Amount(₹)</th>
                                                        <th>SNA Approved Date</th>
                                                        <th>Remarks</th>
                                                        <th>SNA Remarks</th>
                                                        <!-- <th>TPA Final Status</th>
                                                        <th>TPA Final Decission Date</th> -->
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <ng-container *ngIf="oldTrtData?.length">
                                                        <tr *ngFor="let item of oldTrtData; index as i">
                                                            <td>{{i+1}}</td>
                                                            <td width="100">{{item.urn}}</td>
                                                            <!-- <td width="100">{{item.chipno}}</td> -->
                                                            <td width="100">{{item.patientName}}</td>
                                                            <td width="100">{{item.hospitalName}} ({{item.hospitalCode}})</td>
                                                            <td width="100">{{item.dateOfAdmission | date :'dd-MMM-yyyy'}}</td>
                                                            <td width="100">{{item.actualDateOfAdmission | date :'dd-MMM-yyyy'}}</td>
                                                            <td width="100">{{item.dateOfDischarge | date :'dd-MMM-yyyy'}}</td>
                                                            <td width="100">{{item.actualDateOfDischarge | date :'dd-MMM-yyyy'}}</td>
                                                            <td width="100">{{item.claimstatus}}</td>
                                                            <td width="100">{{item.approvedamount }}</td>
                                                            <td width="100">{{item.approveddate | date :'dd-MMM-yyyy'}} </td>
                                                            <td width="100">{{item.snaapprovedamount}}</td>
                                                            <td width="100">{{item.snaapproveddate | date :'dd-MMM-yyyy'}} </td>
                                                            <td width="100">{{item.remarks}}</td>
                                                            <td width="100">{{item.snaremarks}}</td>
                                                            <!-- <td width="100">{{item.tpafinalstatus}}</td>
                                                            <td width="100">{{item.tpafinaldecisiondate | date :'dd-MMM-yyyy, h:mm:ss a'}} </td> -->
                                                        </tr>
                                                    </ng-container>
                                                    <tr *ngIf="! oldTrtData?.length">
                                                        <td colspan="8" align="center" *ngIf="isVisible"><strong class="text-danger">No data
                                                                found</strong></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="row">
            <div class="col-lg-12">
                <hr class="my-xl-4">
                <h5>Multiple Package Blocking</h5>
                <div class="table-responsive">
                    <table class="table mb-0" style="width:100%">
                        <thead>
                            <tr>
                                <th width="40" rowspan="2">Sl#</th>

                                <th rowspan="2">Patient Name</th>
                                <th rowspan="2">Date of Admission</th>
                                <th rowspan="2">Date of Discharge</th>
                                <th rowspan="2">Package Name</th>
                                <th rowspan="2">Claim Raised</th>
                                <th rowspan="2">Details</th>
                            </tr>

                        </thead>
                        <tbody>
                            <ng-container *ngIf="multiFlag">
                                <tr *ngFor="let multiPack of multiPackList,index as i">
                                    <td>{{i+1}}</td>

                                    <td>{{multiPack.patientName}}</td>
                                    <td>{{multiPack.actualDateof | date :'dd-MMM-yyyy'}}</td>
                                    <td>{{multiPack.actualDischarge | date :'dd-MMM-yyyy'}}</td>
                                    <td>{{multiPack.packageName }}</td>
                                    <td>{{multiPack.claimStatus }}</td>
                                    <td><a href="javascript:void(0)" (click)="multiPackageDetails(multiPack.urn,multiPack.authorizedcode,multiPack.hospitalcode,multiPack.transctionId)">Click here</a></td>
                                </tr>
                            </ng-container>
                            <tr *ngIf="!multiFlag">
                                <td colspan="8" align="center"><strong class="text-danger">No data found</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div> -->
        <div class="row mt-4">
            <div class="col-lg-12">
                <div class="card shadow-sm treatment-history">
                    <div class="card-header">
                        <h5 class="mb-0">Action Taken History</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table mb-0">
                                <thead>
                                    <tr>
                                        <th>Sl#</th>
                                        <th>Action By</th>
                                        <th>Action On</th>
                                        <th>Action Type</th>
                                        <th>Amount (₹)</th>
                                        <th>Remark</th>
                                        <th>Description</th>
                                        <!-- <th>Discharge Slip</th>
                                        <th>Additional Docs</th> -->
                                        <th>Additional Docs1</th>
                                        <th>Additional Docs2</th>
                                        <!-- <th>Investigation Docs1</th>
                                        <th>Investigation Docs2</th>
                                        <th>Pre Surgery</th>
                                        <th>Post Surgery</th>
                                        <th>Intra Surgery</th>
                                        <th>Specimen Removal</th>
                                        <th>Patient Photo</th> -->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let action of claimLog index as i">
                                        <td>{{i+1}}</td>
                                        <td>{{action.ACTIONBY}}</td>
                                        <td>{{action.ACTIONON | date :'dd-MMM-yyyy'}}</td>
                                        <td>{{action.ACTIONTYPE}}</td>
                                        <td>{{action.APPROVEDAMOUNT | currency:'':''}}</td>
                                        <td>{{action.REMARKS}}</td>
                                        <td *ngIf="action.DESCRIPTION != undefined"><a href="javascript:void(0)" (click)="viewDescription(action.DESCRIPTION)">view</a></td>
                                        <td *ngIf="action.DESCRIPTION == undefined">--</td>
                                        <!-- <td *ngIf="action.DISCHARGESLIP != undefined"><a href="javascript:void(0);"
                                                (click)="downloadAction($event,action.DISCHARGESLIP,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                    class="bi bi-file-earmark-pdf" style="color:red;font-size:24px;"></i></a>
                                        </td>
                                        <td *ngIf="action.DISCHARGESLIP == undefined">--</td>
                                        <td *ngIf="action.ADITIONALDOCS != undefined"><a href="javascript:void(0);"
                                                (click)="downloadAction($event,action.ADITIONALDOCS,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                    class="bi bi-file-earmark-pdf" style="color:red;font-size:24px"></i></a>
                                        </td>
                                        <td *ngIf="action.ADITIONALDOCS == undefined">--</td> -->
                                        <td *ngIf="action.ADDITIONALDOC1 != undefined"><a href="javascript:void(0);"
                                                (click)="downloadAction($event,action.ADDITIONALDOC1,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                    class="bi bi-file-earmark-pdf" style="color:red;font-size:24px"></i></a>
                                        </td>
                                        <td *ngIf="action.ADDITIONALDOC1 == undefined">--</td>
                                        <td *ngIf="action.ADDITIONALDOC2 != undefined"><a href="javascript:void(0);"
                                                (click)="downloadAction($event,action.ADDITIONALDOC2,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                    class="bi bi-file-earmark-pdf" style="color:red;font-size:24px"></i></a>
                                        </td>
                                        <td *ngIf="action.ADDITIONALDOC2 == undefined">--</td>
                                        <!-- <td *ngIf="action.INVESTIGATION != undefined"><a href="javascript:void(0);"
                                            (click)="downloadAction($event,action.INVESTIGATION,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                class="bi bi-file-earmark-pdf" style="color:red;font-size:24px"></i></a>
                                    </td>
                                    <td *ngIf="action.INVESTIGATION == undefined">--</td>
                                    <td *ngIf="action.INVESTIGATION2 != undefined"><a href="javascript:void(0);"
                                            (click)="downloadAction($event,action.INVESTIGATION2,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                class="bi bi-file-earmark-pdf" style="color:red;font-size:24px"></i></a>
                                    </td>
                                    <td *ngIf="action.INVESTIGATION2 == undefined">--</td>
                                        <td *ngIf="action.PRESURGERY != undefined"><a href="javascript:void(0);"
                                                (click)="downloadAction($event,action.PRESURGERY,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                    class="bi bi-file-earmark-image" style="color:red;font-size:24px"></i></a>
                                        </td>
                                        <td *ngIf="action.PRESURGERY == undefined">--</td>
                                        <td *ngIf="action.POSTSURGERY != undefined"><a href="javascript:void(0);"
                                                (click)="downloadAction($event,action.POSTSURGERY,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                    class="bi bi-file-earmark-image" style="color:red;font-size:24px"></i></a>
                                        </td>
                                        <td *ngIf="action.POSTSURGERY == undefined">--</td>
                                        <td *ngIf="action.INTRA_SURGERY_PHOTO != undefined"><a
                                                href="javascript:void(0);"
                                                (click)="downloadAction($event,action.INTRA_SURGERY_PHOTO,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                    class="bi bi-file-earmark-image" style="color:red;font-size:24px"></i></a>
                                        </td>
                                        <td *ngIf="action.INTRA_SURGERY_PHOTO == undefined">--</td>
                                        <td *ngIf="action.SPECIMEN_REMOVAL_PHOTO != undefined"><a
                                                href="javascript:void(0);"
                                                (click)="downloadAction($event,action.SPECIMEN_REMOVAL_PHOTO,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                    class="bi bi-file-earmark-image" style="color:red;font-size:24px"></i></a>
                                        </td>
                                        <td *ngIf="action.SPECIMEN_REMOVAL_PHOTO == undefined">--</td>
                                        <td *ngIf="action.PATIENT_PHOTO != undefined"><a
                                                href="javascript:void(0);"
                                                (click)="downloadAction($event,action.PATIENT_PHOTO,action.HOSPITALCODE,action.DATEOFADMISSION)"><i
                                                    class="bi bi-file-earmark-image" style="color:red;font-size:24px"></i></a>
                                        </td>
                                        <td *ngIf="action.PATIENT_PHOTO == undefined">--</td> -->
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-lg-12">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <label class="col-form-label">Remarks</label><span class="text-danger">*</span>
                                <ng-autocomplete #auto [data]="allremarks" name="id" id="id" placeholder="Select Remark" (selected)="getId($event)"
                                        [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundTemplate"
                                        [searchKeyword]="keyword" (inputCleared)="clearEvent()" spellcheck="false">
                                    </ng-autocomplete>

                                    <ng-template #itemTemplate let-item>
                                        <a [innerHTML]="item.remarks"></a>
                                    </ng-template>

                                    <ng-template #notFoundTemplate let-notFound>
                                        <div [innerHTML]="notFound"></div>
                                    </ng-template>
                            </div>
                            <div class="col-lg-4 col-xxl-4">
                                <label class="col-form-label">Approved Amount</label>
                                <div class="input-group mb-3">
                                    <span class="input-group-text" id="basic-addon1"><i
                                            class="bi bi-currency-rupee"></i></span>
                                    <input type="text" class="form-control" id="amount" name="amount"  (keypress)="approved_Amount($event)" maxlength="8"
                                        value="{{claimDetails?.TOTALAMOUNTBLOCKED}}">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-xxl-5" [formGroup]="myGroup">
                                <label class="col-form-label">Description</label>
                                <textarea class="form-control" rows="4" id="remarks" name="remarks"
                                    formControlName="remarks" maxlength="500" placeholder="Enter description" #myInput
                                    [maxlength]="maxChars" (keypress)="keyPress($event)"></textarea>
                                <span class="text-danger small">Characters Remaining: {{maxChars -
                                    myInput.value.length}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-grid gap-2 d-sm-block mt-3 mt-xl-4">
            <button (click)="submitDetails($event,claimDetails?.CLAIMID)" class="btn btn-success me-2"
                id="Approve" [disabled]="isApproved">Approve</button>
            <button (click)="submitDetails($event,claimDetails?.CLAIMID)" class="btn btn-primary me-2" id="Query" [disabled]="isQuery">Query</button>
            <button (click)="submitDetails($event,claimDetails?.CLAIMID)" class="btn btn-danger me-2" id="Reject" [disabled]="isReject">Reject</button>
        </div>
    </div>
</div>

<div class="modal justify-content-center" id="appealDisposal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body py-5">
          <span class="text-center text-success">
            {{dtls}}
           </span>

        </div>
        <div class="modal-footer justify-content-center">
            <button type="button" class="btn btn-success" data-bs-dismiss="modal" (click)="modalClose()">Ok</button>
        </div>
      </div>
    </div>
  </div>
